
{% extends "base.html" %}
{% block title %}{{ labels.shop }}{% endblock %}
{% block content %}
<div class="row mb-4">
  <div class="col-md-3">
    <h2 class="h5 mb-3">
      {{ 'Kategorie' if current_lang=='no' else 'Categories' }}
    </h2>
    <ul class="list-unstyled">
      <li>
        <a href="{{ url_for('product_list') }}" class="category-link {% if not request.args.get('category') %}active{% endif %}">
          {{ 'Wszystkie' if current_lang=='no' else 'All' }}
        </a>
      </li>
      {% for cat in categories %}
        <li>
          <a href="{{ url_for('product_list', category=cat) }}" class="category-link {% if request.args.get('category') == cat %}active{% endif %}">
            {{ cat }}
          </a>
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-9">
    <div class="row g-4">
      {% for product in products %}
        <div class="col-md-4 col-sm-6">
          <div class="card product-card h-100 border-0 shadow-sm">
            {% if product.image_url %}
              <img src="{{ product.image_url }}" class="card-img-top product-image" alt="{{ product.name }}">
            {% endif %}
            <div class="card-body d-flex flex-column">
              <div class="small text-muted mb-1">{{ product.brand }}</div>
              <h3 class="h6 mb-2">{{ product.name }}</h3>
              <p class="small text-muted flex-grow-1">
                {% if current_lang == 'no' %}
                  {{ product.description_no|truncate(100) }}
                {% else %}
                  {{ product.description_en or product.description_no|truncate(100) }}
                {% endif %}
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fw-semibold">{{ '%.2f'|format(product.price) }} NOK</span>
                <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-outline-dark btn-sm">
                  {{ 'Szczegóły' if current_lang=='no' else 'Details' }}
                </a>
              </div>
            </div>
          </div>
        </div>
      {% else %}
        <p class="text-muted">
          {{ 'Brak produktów do wyświetlenia.' if current_lang=='no' else 'No products to display.' }}
        </p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
